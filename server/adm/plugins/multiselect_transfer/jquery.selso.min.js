!function(a){a.extend({selso:{defaults:{type:"alpha",orderBy:"span.value",direction:"asc"},extractVal:function(e,t){return"num"==e?1*t:t},accentsTidy:function(e){var t=e.toLowerCase();return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(new RegExp(/\s/g),"")).replace(new RegExp(/[àáâãäå]/g),"a")).replace(new RegExp(/æ/g),"ae")).replace(new RegExp(/ç/g),"c")).replace(new RegExp(/[èéêë]/g),"e")).replace(new RegExp(/[ìíîï]/g),"i")).replace(new RegExp(/ñ/g),"n")).replace(new RegExp(/[òóôõö]/g),"o")).replace(new RegExp(/œ/g),"oe")).replace(new RegExp(/[ùúûü]/g),"u")).replace(new RegExp(/[ýÿ]/g),"y")).replace(new RegExp(/\W/g),"")},orderAlpha:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){if(e.charAt(r)<t.charAt(r))return-1;if(e.charAt(r)>t.charAt(r))return 1}return e.length>t.length?1:e.length<t.length?-1:0},alphaGreaterThan:function(e,t){return this.orderAlpha(e,t)},stablesort:function(e,t){for(var n,r=e,s=1;s<r.length;s++){for(var l=1;l<=s&&0<t(r[s-l],r[s]);)l++;0<l&&((n=r.slice(0,s-l+1)).push(r[s]),n=n.concat(r.slice(s-l+1,s)),s<r.length-1&&(n=n.concat(r.slice(s+1))),r=n)}return r}}}),a.fn.extend({outhtml:function(){return this.length?a("<div>").append(a(this[0]).clone()).html():null},prependToParent:function(){return this.each(function(){a(this).parent().prepend(a(this).remove())})},selso:function(e){var t=e.type||a.selso.defaults.type,n=e.orderBy||a.selso.defaults.orderBy,r=e.direction||a.selso.defaults.direction,s=e.extract,l=e.orderFn;a.isFunction(s)||(s=function(e){return a.selso.extractVal(t,a(n,e).text())});var o=[];this.each(function(){o.unshift({id:this.id,val:s(this)})}),a.isFunction(l)||(l="num"==t?function(e,t){return e.val-t.val}:("accents"==t&&a.map(o,function(e){e.val=a.selso.accentsTidy(e.val)}),function(e,t){return a.selso.alphaGreaterThan(e.val,t.val)}));var c=l;"asc"==r&&(c=function(e,t){return-1*l(e,t)}),o=a.selso.stablesort(o,c);for(var i=0;i<o.length;i++)a("#"+o[i].id).prependToParent();return this},sortBoxes:function(e){e||(e={type:"alpha",extract:function(e){return a(e).text()}}),a("option",this).selso(e).removeAttr("selected")}})}(jQuery),$(function(){$("#letters select option:empty").remove(),$("select.left option").addClass("new"),$("select.right option").addClass("old"),$("button.add").click(function(){var e=$(this).closest("fieldset").find("select.left option:selected"),t=$(this).closest("fieldset").find("select.right");return t.append(e),$("select.left").sortBoxes({type:"num",extract:function(e){return $(e).attr("data-number")||$(e).text()}}),t.find("option:selected").removeAttr("selected"),!1}),$("button.remove").click(function(){var e=$(this).closest("fieldset").find("select.left"),t=$(this).closest("fieldset").find("select.right option:selected");return e.append(t),$("select.left").sortBoxes({type:"num",extract:function(e){return $(e).attr("data-number")||$(e).text()}}),t.find("option:selected").removeAttr("selected"),!1}),$("button.add.all").click(function(){var e=$(this).closest("fieldset").find("select.left option"),t=$(this).closest("fieldset").find("select.right");return t.append(e),$("select.left").sortBoxes({type:"num",extract:function(e){return $(e).attr("data-number")||$(e).text()}}),t.find("option:selected").removeAttr("selected"),!1}),$("button.remove.all").click(function(){var e=$(this).closest("fieldset").find("select.left"),t=$(this).closest("fieldset").find("select.right option");return e.append(t),$("select.left").sortBoxes({type:"num",extract:function(e){return $(e).attr("data-number")||$(e).text()}}),t.find("option:selected").removeAttr("selected"),!1}),$(document).on("dblclick","select.left option, select.right option",function(){var e=$(this).closest("select").hasClass("left")?"left":"right",t="left"==e?"right":"left",n=$(this).closest("select."+e).find("option:selected, option:focus");$(this).closest("fieldset").find("select."+t).append(n),$("select.left").sortBoxes({type:"num",extract:function(e){return $(e).attr("data-number")||$(e).text()}}),$("select.right").find("option:selected").removeAttr("selected")})});